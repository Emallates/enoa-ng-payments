!function(e){function t(n){if(r[n])return r[n].exports;var u=r[n]={i:n,l:!1,exports:{}};return e[n].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),a=n(u),i=r(2),o=n(i),c=r(3),s=n(c),l=r(4);n(l);t.default=angular.module("stripe",["stripe.directives"]).provider("stripeConfig",a.default).service("httpService",o.default).service("stripeSource",s.default)},function(e,t,r){"use strict";function n(){function e(e,t,r){this.key=e,this.base_url=t,this.defaults=r}var t=!1,r="https://api.stripe.com/v1",n={add_card_amount:100,currency:"usd",redirect:null};this.set=function(e,u){t=e.apiKey,e.baseUrl&&(r=e.baseUrl),n=angular.extend({},n,u)},this.$get=[function(){return new e(t,r,n)}]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t,r,u){n(this,e),this.$http=t,this.stripeConfig=u,this.$httpParamSerializerJQLike=r}return u(e,[{key:"doRequest",value:function(e,t){var r=this.stripeConfig;return e.data&&(e.data.key=r.key),e.url=-1===e.url.indexOf(r.base_url)?""+r.base_url+e.url:e.url,e.data=this.$httpParamSerializerJQLike(e.data),e.headers=angular.extend({"Content-Type":"application/x-www-form-urlencoded"},e.headers),"function"!=typeof t?this.$http(e):this.$http(e).then(function(e){return t(e.status,e.data)}).catch(function(e){return t(e.status,e.error||e.data||e)})}}]),e}();a.$injector=["$http","$httpParamSerializerJQLike","stripeConfig"],t.default=a},function(e,t,r){"use strict";function n(e,t,r){function n(t){var n={type:"card"};return i(t.card,function(e,t){o.exp_year,t&&(n["card["+t+"]"]=e)}),t.billing_add&&i(t.billing_add,function(e,t){if(o(["email","name","phone"],t))return n["owner["+t+"]"]=e;"address"===t?i(e,function(e,t){if(o(["postal_code","city","country","line1","line2","state"],t))return n["owner[address]["+t+"]"]=e}):"metadata"===t&&i(e,function(r,u){return n["metadata["+t+"]"]=e})}),new r(function(r,a){var i=u(t,r,a);return e.doRequest({data:n,url:"/sources",method:"POST"},i)})}function u(r,n,u){function i(r,n,u){function a(e,t,r){return function(n,u){if(200!==n||u.error)return r(u.error);"canceled"===u.status||"consumed"===u.status||"failed"===u.status?(e.nativeElement.innerHTML="",r(u.status)):"chargeable"===u.status&&(e.nativeElement.innerHTML="",t(u))}}return function(i,o){function c(){return e.doRequest({url:"/sources/"+o.id+"?key="+t.key+"&client_secret="+o.client_secret}).then(function(e){var t=e.data;return"pending"===t.status||l(e.status,t)}).then(function(e){return!0===e?c():e}).catch(u)}if(200!==i||o.error)return u(o.error||o);var s=r.targetElement;s||(s=angular.element("<div></div>")[0],angular.element("body").append(s)),console.log("tElm ->",s),s.innerHTML='<iframe style="width:100%; height: 800px;" frameborder="0" src="'+o.redirect.url+'"></iframe>',r.nativeElement=s;var l=a(r,n,u);return c()}}return function(o,c){if(200!==o||c.error)return u(c.error||c);if("not_supported"===c.card.three_d_secure&&"chargeable"===c.status)return n(c);if("optional"===c.card.three_d_secure||"required"===c.card.three_d_secure){var s=a({},{amount:t.defaults.add_card_amount,currency:t.defaults.currency},{type:"three_d_secure",three_d_secure:{card:c.id},redirect:{return_url:r.redirect_url||t.default_redirect||window.location.href}}),l=i(r,n,u);return e.doRequest({data:s,url:"/sources",method:"POST"},l)}return u(c)}}var a=angular.extend,i=angular.forEach,o=function(e,t){return e.indexOf(t)>-1};return{createCard:n}}Object.defineProperty(t,"__esModule",{value:!0}),n.$injector=["httpService","stripeConfig","$q"],t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5);t.default=angular.module("stripe.directives",[]).directive("createSourceToStripe",n.addCard.Factory)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCard=void 0;var n=r(6),u=function(e){return e&&e.__esModule?e:{default:e}}(n);t.addCard=u.default},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(){function e(t){n(this,e),this.restrict="EA",this.stripeSource=t,this.scope={source:"=",onSuccess:"&",onFail:"&"},this.template='<div><button ng-click="save()">Save to Stripe</button></div>'}return u(e,[{key:"link",value:function(e,t,r){var n=this;e.onFail=e.onFail||angular.noop,e.onSuccess=e.onSuccess||angular.noop,e.source.targetElement=e.source.targetElement,e.source.targetElement||(e.source.targetElement=angular.element("<div>")[0],t.append(e.source.targetElement)),e.save=function(){n.stripeSource.createCard(e.source).then(function(t){return e.onSuccess({source:t})}).catch(function(t){return e.onFail({error:t})})}}}],[{key:"Factory",value:function(t){return new e(t)}}]),e}();a.Factory.$inject=["stripeSource"],t.default=a},function(e,t,r){"use strict";var n=r(0);!function(e){e&&e.__esModule}(n);e.exports=angular.module("ng-payments",["stripe"])}]);